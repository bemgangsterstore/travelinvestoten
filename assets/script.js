// Charts + Store simulation
let btc = Array.from({length:14}, ()=>26500 + Math.random()*300 - 150);
let labels = btc.map((_,i)=>i+1);
function makeLine(ctx,data,color){return new Chart(ctx,{type:'line',data:{labels:labels,datasets:[{data,borderColor:color,backgroundColor:color+'33',tension:0.35,fill:true}]},options:{responsive:true,plugins:{legend:{display:false}},scales:{x:{display:false}}}});}
let lineChart, barChart;
function initCharts(){ const l=document.getElementById('btcLine'); if(l){lineChart=makeLine(l.getContext('2d'),btc,'#7c4dff');} const b=document.getElementById('cryptoBar'); if(b){barChart=new Chart(b.getContext('2d'),{type:'bar',data:{labels:['BTC','ETH','BNB','SOL','XRP'],datasets:[{data:[26500,1850,350,110,0.5],backgroundColor:['#7c4dff','#b072ff','#5de0ff','#ffb86b','#8b5cf6']}]},options:{responsive:true,plugins:{legend:{display:false}}}});}}
function tick(){ if(lineChart){ btc.push(26500 + Math.random()*500 - 250); btc.shift(); lineChart.data.datasets[0].data=btc; lineChart.update(); } if(barChart){ barChart.data.datasets[0].data = barChart.data.datasets[0].data.map(v=>(v*(0.995+Math.random()*0.01)).toFixed(2)); barChart.update(); } document.getElementById('flights').innerHTML=['LATAM 1234 - GRU → REC - Cancelado','GOL 5678 - GIG → FOR - Cancelado'].map(x=>'<li>'+x+'</li>').join(''); document.getElementById('stocks').innerHTML=['AAPL - $'+(170+Math.random()*10).toFixed(2),'NVDA - $'+(480+Math.random()*20).toFixed(2)].map(s=>'<li>'+s+'</li>').join('');}
// Store
const PRODUCTS=[{id:1,name:'iPhone 15 Pro (256GB)',price:7499,desc:'Tela Super Retina XDR, A17 Pro'},{id:2,name:'MacBook Pro 14\"',price:17499,desc:'M2 Pro, performance'},{id:3,name:'iPad Air',price:4599,desc:'Liquid Retina'},{id:4,name:'AirPods Max',price:2699,desc:'Som de alta fidelidade'},{id:5,name:'Apple Watch Ultra',price:4299,desc:'Resistência e saúde'}];let CART=[];function fmt(v){return 'R$ '+v.toFixed(2).replace('.',',')}function renderProducts(){const el=document.getElementById('products');if(!el)return;el.innerHTML=PRODUCTS.map(p=>`<div class="product"><div><div class="title">${p.name}</div><div class="desc">${p.desc}</div></div><div><div class="price">${fmt(p.price)}</div><button class="btn" onclick="addToCart(${p.id})">Adicionar ao carrinho</button></div></div>`).join('');}function addToCart(id){const p=PRODUCTS.find(x=>x.id===id);if(!p)return;const it=CART.find(i=>i.id===id);if(it)it.qty+=1;else CART.push({id:p.id,name:p.name,price:p.price,qty:1});renderCart();}function removeFromCart(id){CART=CART.filter(i=>i.id!==id);renderCart();}function renderCart(){const el=document.getElementById('cart-items');if(!el)return;if(CART.length===0){el.innerHTML='<li>(vazio)</li>';document.getElementById('cart-total').innerText='R$ 0,00';return;}el.innerHTML=CART.map(i=>`<li>${i.name} x${i.qty} - ${fmt(i.price*i.qty)} <button class="btn" onclick="removeFromCart(${i.id})">Remover</button></li>`).join('');document.getElementById('cart-total').innerText=fmt(CART.reduce((s,i)=>s+i.price*i.qty,0));}document.addEventListener('DOMContentLoaded',()=>{initCharts();renderProducts();renderCart();tick();setInterval(tick,4000);});